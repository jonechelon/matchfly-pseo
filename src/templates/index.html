<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MatchFly - Voos Cancelados e Atrasados | Indenização ANAC 400</title>
    <meta name="description" content="Verifique se seu voo tem direito a indenização de até R$ 10.000. Lista atualizada de voos cancelados e atrasados no Brasil.">
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "ItemList",
      "name": "Voos com Problemas - {{ voos_hoje_count }} voos",
      "description": "Lista de voos atrasados e cancelados em GRU - Indenização ANAC 400",
      "numberOfItems": {{ recent_pages|length }},
      "itemListElement": [
        {% for page in recent_pages %}
        {
          "@type": "ListItem",
          "position": {{ loop.index }},
          "item": {
            "@type": "Flight",
            "@id": "{{ base_url }}{{ page.url }}",
            "name": "Voo {{ page.flight_number }}",
            "flightNumber": "{{ page.flight_number }}",
            "provider": {
              "@type": "Airline",
              "name": "{{ page.airline }}"
            },
            "departureAirport": {
              "@type": "Airport",
              "iataCode": "GRU",
              "name": "Aeroporto de Guarulhos"
            },
            "departureTime": "{{ page.scheduled_time }}",
            "flightStatus": "{{ page.status }}"
          }
        }{% if not loop.last %},{% endif %}
        {% endfor %}
      ]
    }
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }
    </style>
    <!-- Animação Barra de Alertas (marquee) -->
    <style>
        @keyframes marquee {
            0% { transform: translate3d(0, 0, 0); }
            100% { transform: translate3d(-50%, 0, 0); }
        }
        .animate-marquee {
            display: flex;
            width: fit-content;
            animation: marquee 40s linear infinite;
        }
        .hover\:pause:hover { animation-play-state: paused; }
        .ticker-wrap.group:hover .animate-marquee { animation-play-state: paused; }
        .ticker-wrap {
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            position: relative;
            z-index: 40;
        }
    </style>
    <!-- Flip Card 3D + fix pointer-events -->
    <style>
        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
        .flip-card-inner { transition: transform 0.6s ease-in-out; }
        .flip-card-inner.rotate-y-180 .card-front { pointer-events: none; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #1e293b; border-radius: 3px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #475569; border-radius: 3px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #64748b; }
        /* Marquee vertical (Card Ver Mais) */
        @keyframes marqueeVertical {
            0% { transform: translate3d(0, 0, 0); }
            100% { transform: translate3d(0, -33.333%, 0); }
        }
        .animate-marquee-vertical {
            display: flex;
            flex-direction: column;
            animation: marqueeVertical 20s linear infinite;
            will-change: transform;
        }
        .ticker-loop { flex-shrink: 0; }
        .ticker-item {
            padding: 0.375rem 0;
            font-size: 0.875rem;
            font-family: ui-monospace, monospace;
            color: rgb(147 197 253);
            white-space: nowrap;
        }
        .mask-gradient-y {
            mask-image: linear-gradient(to bottom, transparent 0%, black 15%, black 85%, transparent 100%);
            -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 15%, black 85%, transparent 100%);
        }
        .animate-marquee-vertical:hover { animation-play-state: paused; }
        /* ========== SCROLL HORIZONTAL MOBILE ========== */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .snap-x { -webkit-overflow-scrolling: touch; scroll-behavior: smooth; }
        .snap-x * { -webkit-tap-highlight-color: transparent; }
        .snap-x::after { content: ''; flex: 0 0 1rem; }
        /* Scroll snap dinâmico (aplicado via JS ao tocar) */
        .js-ping-pong-scroll.snap-x { scroll-snap-type: x mandatory; }
        .js-ping-pong-scroll.snap-x > * { scroll-snap-align: center; }
        .js-ping-pong-scroll { -webkit-overflow-scrolling: touch; scroll-behavior: smooth; }
        .js-ping-pong-scroll * { -webkit-tap-highlight-color: transparent; }
        /* Scrollbar verso do card */
        .scrollbar-thin::-webkit-scrollbar { width: 4px; }
        .scrollbar-thin::-webkit-scrollbar-track { background: rgba(255,255,255,0.1); border-radius: 2px; }
        .scrollbar-thin::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.3); border-radius: 2px; }
        .scrollbar-thin::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.5); }

        /* ========== Split-Flap / Aeroporto Retrô ========== */
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
        .font-board { font-family: 'Share Tech Mono', monospace; }
        .flap-box {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background-color: #1e293b;
            color: #fcd34d;
            font-weight: bold;
            border-radius: 4px;
            position: relative;
            box-shadow: 0 2px 4px rgba(0,0,0,0.5);
            overflow: hidden;
        }
        .flap-box::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background-color: rgba(0,0,0,0.3);
            box-shadow: 0 1px 0 rgba(255,255,255,0.1);
        }
        @keyframes tickUp {
            0% { transform: translateY(100%); opacity: 0; }
            10% { transform: translateY(0); opacity: 1; }
            90% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-100%); opacity: 0; }
        }
        .animate-tick {
            animation: tickUp 4s infinite;
        }

        /* Efeito de Vitória/Jackpot */
        @keyframes jackpotPulse {
            0% { transform: scale(1); filter: brightness(1) drop-shadow(0 0 0 transparent); }
            50% { transform: scale(1.05); filter: brightness(1.3) drop-shadow(0 0 15px rgba(234, 179, 8, 0.6)); border-color: #eab308; }
            100% { transform: scale(1); filter: brightness(1) drop-shadow(0 0 0 transparent); }
        }
        .flap-box.jackpot-active {
            animation: jackpotPulse 1.5s ease-in-out infinite;
            background-color: #0f172a;
            color: #facc15;
            border: 1px solid #eab308;
        }
        .blur-motion {
            filter: blur(0.5px);
            color: #94a3b8;
        }
    </style>
</head>
<body class="bg-white antialiased">
    
    <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md border-b border-gray-100 shadow-sm">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between h-20">
                <a href="/" class="flex items-center space-x-2 group">
                    <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-blue-900 to-blue-700 flex items-center justify-center group-hover:scale-105 transition-transform shadow-lg">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                        </svg>
                    </div>
                    <div class="flex flex-col">
                        <span class="text-xl font-black text-blue-950 tracking-tight leading-none">MatchFly</span>
                        <span class="text-[10px] font-bold text-blue-600 uppercase tracking-wider">ANAC Compliance</span>
                    </div>
                </a>

                <nav class="hidden md:flex items-center space-x-1">
                    <a href="/" class="flex items-center space-x-1.5 px-4 py-2 rounded-full bg-blue-50 text-blue-900 font-bold text-sm transition-all">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
                        <span>Início</span>
                    </a>
                    
                    <a href="cidades.html" class="flex items-center space-x-1.5 px-4 py-2 rounded-full text-gray-600 hover:bg-gray-50 hover:text-blue-900 font-medium text-sm transition-all">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg>
                        <span>Cidades</span>
                    </a>

                    <a href="cancelados.html" class="flex items-center space-x-1.5 px-4 py-2 rounded-full text-gray-600 hover:bg-red-50 hover:text-red-700 font-medium text-sm transition-all">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                        <span>Cancelados</span>
                    </a>

                    <a href="atrasados.html" class="flex items-center space-x-1.5 px-4 py-2 rounded-full text-gray-600 hover:bg-orange-50 hover:text-orange-700 font-medium text-sm transition-all">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                        <span>Atrasados</span>
                    </a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Barra de Alertas Unificada (Cancelados + Atrasados) -->
    <div class="w-full bg-slate-900 text-white border-b border-slate-800 shadow-md sticky top-20 z-40">
        <div class="flex items-center h-10">
            <div class="bg-slate-950 px-4 h-full flex items-center gap-2 z-10 shrink-0 font-bold text-xs uppercase tracking-wider text-blue-200">
                <span class="relative flex h-2 w-2">
                  <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"></span>
                  <span class="relative inline-flex rounded-full h-2 w-2 bg-blue-500"></span>
                </span>
                <span class="md:hidden">AO VIVO</span>
                <span class="hidden md:inline">Monitoramento em Tempo Real</span>
            </div>
            
            <div class="ticker-wrap group cursor-default">
                <div class="animate-marquee hover:pause flex items-center gap-8 px-4">
                    {% for i in range(2) %}
                    {% for page in recent_pages[:20] %}
                    <div class="flex items-center gap-2 text-sm font-medium opacity-90 hover:opacity-100 transition-opacity">
                        {% if 'Cancelado' in page.status %}
                        <i data-lucide="x-circle" class="w-4 h-4 text-red-400"></i>
                        {% if page.date_time_fmt or page.data_partida %}<span class="text-[10px] bg-white/10 px-1.5 rounded text-white/80 font-mono mr-1">{{ page.date_time_fmt|default(page.data_partida) }}</span>{% endif %}
                        <span class="text-red-200 font-bold">{{ page.flight_number }}</span>
                        <span class="text-slate-300">para {{ page.destination_city|default(page.destination)|default('N/A') }}</span>
                        <span class="text-xs bg-red-950/50 px-2 py-0.5 rounded text-red-300 border border-red-900/50">Cancelado</span>
                        {% else %}
                        <i data-lucide="clock-4" class="w-4 h-4 text-amber-400"></i>
                        {% if page.date_time_fmt or page.data_partida %}<span class="text-[10px] bg-white/10 px-1.5 rounded text-white/80 font-mono mr-1">{{ page.date_time_fmt|default(page.data_partida) }}</span>{% endif %}
                        <span class="text-amber-200 font-bold">{{ page.flight_number }}</span>
                        <span class="text-slate-300">para {{ page.destination_city|default(page.destination)|default('N/A') }}</span>
                        <span class="text-xs bg-amber-950/50 px-2 py-0.5 rounded text-amber-300 border border-amber-900/50">Atrasado</span>
                        {% endif %}
                    </div>
                    <span class="text-slate-700">•</span>
                    {% endfor %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

    <!-- Hero: Painel de Aeroporto (Split-Flap / Solari) -->
    <div class="relative bg-slate-900 border-b-4 border-slate-800 overflow-hidden pt-8 pb-12 md:pt-16 md:pb-20">
        <div class="absolute inset-0 opacity-10" style="background-image: radial-gradient(#64748b 1px, transparent 1px); background-size: 20px 20px;"></div>
        
        <div class="container mx-auto px-2 relative z-10 text-center">
            
            <div class="inline-block mb-4 md:mb-8">
                <span class="bg-blue-900/50 text-blue-200 text-[10px] md:text-sm font-board px-3 py-1 rounded-full border border-blue-700/50 tracking-[0.2em] uppercase backdrop-blur-sm">
                    MatchFly • Radar ANAC 400
                </span>
            </div>

            <h1 class="text-2xl md:text-5xl font-black text-white mb-6 md:mb-10 tracking-tight leading-tight px-2">
                SEU VOO <span class="text-red-500 inline-block hover:animate-pulse">ATRASOU</span> OU <span class="text-red-500 inline-block hover:animate-pulse">CANCELOU?</span>
            </h1>

            <div class="flex flex-col items-center justify-center mb-8 md:mb-12">
                <p class="text-slate-500 text-[10px] md:text-base font-board uppercase tracking-[0.2em] mb-2 md:mb-4">Compensação estimada</p>
                
                <div class="hero-board-container flex items-end justify-center gap-1 md:gap-2 scale-90 md:scale-100">
                    <div class="flex gap-1 mr-1 md:mr-2">
                        <div class="flap-box text-xl md:text-7xl w-8 md:w-20 h-12 md:h-28 bg-slate-800 text-yellow-500">R</div>
                        <div class="flap-box text-xl md:text-7xl w-8 md:w-20 h-12 md:h-28 bg-slate-800 text-yellow-500">$</div>
                    </div>

                    <div class="flex gap-1">
                        <div id="digit-1" class="flap-box text-2xl md:text-7xl w-10 md:w-20 h-14 md:h-28 text-white">0</div>
                        <div id="digit-2" class="flap-box text-2xl md:text-7xl w-10 md:w-20 h-14 md:h-28 text-white">0</div>
                        <div class="flap-box text-2xl md:text-7xl w-4 md:w-10 h-14 md:h-28 text-slate-600 bg-transparent shadow-none border-none">.</div>
                        <div id="digit-3" class="flap-box text-2xl md:text-7xl w-10 md:w-20 h-14 md:h-28 text-white">0</div>
                        <div id="digit-4" class="flap-box text-2xl md:text-7xl w-10 md:w-20 h-14 md:h-28 text-white">0</div>
                        <div id="digit-5" class="flap-box text-2xl md:text-7xl w-10 md:w-20 h-14 md:h-28 text-white">0</div>
                    </div>
                </div>
                
                <p class="text-[10px] text-slate-600 mt-3 font-mono">* Valores previstos pela legislação</p>
            </div>

            <div class="inline-flex flex-col md:flex-row items-center justify-center gap-2 md:gap-4 bg-black/40 backdrop-blur-md border border-slate-700/50 p-2 md:p-3 rounded-xl mx-4">
                <div class="flex items-center gap-2">
                    <span class="relative flex h-2 w-2 md:h-3 md:w-3">
                      <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span>
                      <span class="relative inline-flex rounded-full h-2 w-2 md:h-3 md:w-3 bg-red-500"></span>
                    </span>
                    <span class="text-slate-300 font-board text-xs md:text-sm uppercase tracking-widest">INCIDENTES HOJE:</span>
                </div>
                
                <div id="incidents-counter" class="flex gap-1" data-count="{{ voos_hoje_count|default('850') }}">
                    <div class="flap-box w-6 h-8 md:w-8 md:h-10 text-sm md:text-xl text-white">0</div>
                    <div class="flap-box w-6 h-8 md:w-8 md:h-10 text-sm md:text-xl text-white">0</div>
                    <div class="flap-box w-6 h-8 md:w-8 md:h-10 text-sm md:text-xl text-white">0</div>
                </div>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // Função para girar um único dígito (Efeito Slot Machine)
        const spinDigit = (elementId, targetVal, duration, delay) => {
            const el = document.getElementById(elementId);
            if (!el) return;

            setTimeout(() => {
                el.classList.add('blur-motion');

                let startTime = null;
                const animate = (timestamp) => {
                    if (!startTime) startTime = timestamp;
                    const progress = timestamp - startTime;

                    if (progress < duration) {
                        el.innerText = Math.floor(Math.random() * 10);
                        requestAnimationFrame(animate);
                    } else {
                        el.innerText = String(targetVal);
                        el.classList.remove('blur-motion');
                    }
                };
                requestAnimationFrame(animate);
            }, delay);
        };

        // Função Principal da Sequência (Jackpot 10.000)
        const runJackpotSequence = () => {
            document.querySelectorAll('.flap-box').forEach(el => el.classList.remove('jackpot-active'));

            spinDigit('digit-1', 1, 1500, 0);
            spinDigit('digit-2', 0, 2000, 200);
            spinDigit('digit-3', 0, 2500, 400);
            spinDigit('digit-4', 0, 3000, 600);
            spinDigit('digit-5', 0, 3500, 800);

            setTimeout(() => {
                ['digit-1', 'digit-2', 'digit-3', 'digit-4', 'digit-5'].forEach(id => {
                    const el = document.getElementById(id);
                    if (el) el.classList.add('jackpot-active');
                });
            }, 4400);
        };

        runJackpotSequence();
        setInterval(runJackpotSequence, 10000);

        // Animação única para Incidentes (apenas na entrada)
        const counterContainer = document.getElementById('incidents-counter');
        if (counterContainer) {
            const totalCount = counterContainer.getAttribute('data-count') || '850';
            counterContainer.innerHTML = '';
            totalCount.toString().split('').forEach((digit, index) => {
                const div = document.createElement('div');
                div.className = 'flap-box w-6 h-8 md:w-8 md:h-10 text-sm md:text-xl text-white';
                div.id = 'inc-digit-' + index;
                div.innerText = '0';
                counterContainer.appendChild(div);
                spinDigit('inc-digit-' + index, digit, 2500, index * 200);
            });
        }
    });
    </script>

    <!-- Seção: Painel de Destinos (estilo placa de embarque) -->
    <section id="destinos" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
        <div class="flex flex-col md:flex-row items-center justify-between mb-10 border-b-2 border-slate-200 pb-4 gap-4">
            <div class="flex items-center gap-3">
                <div class="bg-slate-900 p-2 rounded">
                    <svg class="w-6 h-6 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                </div>
                <div>
                    <h2 class="text-2xl md:text-3xl font-black text-slate-800 uppercase tracking-tighter">
                        PAINEL DE DESTINOS
                    </h2>
                    <p class="text-slate-500 font-board text-xs uppercase tracking-widest">
                        Rotas com alta incidência de problemas
                    </p>
                </div>
            </div>
            
            <div class="hidden md:flex gap-1">
                <div class="w-2 h-2 rounded-full bg-slate-300"></div>
                <div class="w-2 h-2 rounded-full bg-slate-300"></div>
                <div class="w-2 h-2 rounded-full bg-slate-300"></div>
            </div>
        </div>
        
        {% if city_data and city_data|length > 0 %}
            {% for city_name, city_info in city_data.items() %}
            <div class="mb-16">
                <div class="flex flex-wrap items-center justify-between gap-4 mb-6">
                    <div class="flex items-center gap-3 flex-wrap">
                        <h3 class="text-2xl font-bold text-slate-800">{{ city_name }}</h3>
                        <div class="flex flex-wrap gap-2">
                            {% for iata in city_info.iatas %}
                            <span class="px-3 py-1 text-xs font-bold font-mono bg-blue-100 text-blue-700 rounded-full uppercase">
                                {{ iata }}
                            </span>
                            {% endfor %}
                        </div>
                    </div>
                    <span class="text-sm font-medium text-slate-500 bg-slate-100 px-3 py-1.5 rounded-full">
                        {{ city_info.total_flights }} incidentes
                    </span>
                </div>
                <div class="flex overflow-x-auto gap-4 pb-4 no-scrollbar js-ping-pong-scroll md:grid md:grid-cols-2 lg:grid-cols-3 md:overflow-visible md:pb-0">
                    {% for card_html in city_info.cards %}
                    <div class="flex-shrink-0 w-[85vw] sm:w-[350px] md:w-auto flex justify-center">{{ card_html | safe }}</div>
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="text-center py-12">
                <p class="text-gray-500 text-lg">Nenhum voo recente disponível no momento.</p>
            </div>
        {% endif %}
    </section>

    <!-- Seção FAQ (Perguntas Frequentes) -->
    <section id="faq" class="bg-slate-50 py-20">
        <div class="container mx-auto px-4 max-w-4xl">
            <div class="text-center mb-12">
                <div class="inline-flex items-center space-x-2 px-4 py-2 bg-blue-100 rounded-full mb-4">
                    <span class="text-xs font-bold text-blue-900 uppercase tracking-wider">Perguntas Frequentes</span>
                </div>
                <h3 class="text-3xl md:text-5xl font-black text-blue-950 mb-4">
                    Tire Suas Dúvidas
                </h3>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                    Respostas rápidas sobre o processo de indenização
                </p>
            </div>

            <div class="space-y-4">
                <!-- FAQ Item 1 -->
                <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
                    <button onclick="toggleFAQ(1)" class="w-full px-6 py-5 flex items-center justify-between text-left hover:bg-blue-50 transition-colors group">
                        <h4 class="text-lg font-bold text-blue-950 pr-4">É realmente gratuito?</h4>
                        <svg id="faq-icon-1" class="w-5 h-5 text-blue-900 flex-shrink-0 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </button>
                    <div id="faq-content-1" class="hidden px-6 pb-5">
                        <p class="text-gray-600 leading-relaxed">
                            Sim, a análise é 100% gratuita. Você só paga uma porcentagem se e quando receber sua indenização.
                        </p>
                    </div>
                </div>

                <!-- FAQ Item 2 -->
                <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
                    <button onclick="toggleFAQ(2)" class="w-full px-6 py-5 flex items-center justify-between text-left hover:bg-blue-50 transition-colors group">
                        <h4 class="text-lg font-bold text-blue-950 pr-4">Quanto posso receber?</h4>
                        <svg id="faq-icon-2" class="w-5 h-5 text-blue-900 flex-shrink-0 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </button>
                    <div id="faq-content-2" class="hidden px-6 pb-5">
                        <p class="text-gray-600 leading-relaxed">
                            Indenizações por danos morais via ANAC 400 costumam variar entre R$ 3.000 e R$ 10.000.
                        </p>
                    </div>
                </div>

                <!-- FAQ Item 3 -->
                <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
                    <button onclick="toggleFAQ(3)" class="w-full px-6 py-5 flex items-center justify-between text-left hover:bg-blue-50 transition-colors group">
                        <h4 class="text-lg font-bold text-blue-950 pr-4">Quanto tempo demora?</h4>
                        <svg id="faq-icon-3" class="w-5 h-5 text-blue-900 flex-shrink-0 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </button>
                    <div id="faq-content-3" class="hidden px-6 pb-5">
                        <p class="text-gray-600 leading-relaxed">
                            O tempo médio para propostas de acordo via Liberfly é de 30 a 90 dias.
                        </p>
                    </div>
                </div>
            </div>

            <!-- CTA após FAQ -->
            <div class="mt-12 text-center">
                <a href="https://funnel.airhelp.com/claims/new/trip-details?lang=pt-br&departureAirportIata=GRU&a_aid=69649260287c5&a_bid=c63de166&utm_medium=affiliate&utm_source=pap&utm_campaign=aff-69649260287c5" 
                   target="_blank" 
                   rel="noopener sponsored"
                   class="inline-flex items-center space-x-3 px-10 py-5 bg-gradient-to-r from-blue-900 to-blue-700 hover:from-blue-800 hover:to-blue-600 text-white font-bold text-lg rounded-full shadow-2xl hover:shadow-3xl transition-all hover:scale-105 group">
                    <span>Verificar Meu Voo Agora</span>
                    <svg class="w-6 h-6 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                    </svg>
                </a>
            </div>
        </div>
    </section>

    <script>
        function toggleFAQ(num) {
            const content = document.getElementById('faq-content-' + num);
            const icon = document.getElementById('faq-icon-' + num);
            
            if (content.classList.contains('hidden')) {
                // Fechar todos os outros
                for (let i = 1; i <= 3; i++) {
                    if (i !== num) {
                        document.getElementById('faq-content-' + i).classList.add('hidden');
                        document.getElementById('faq-icon-' + i).classList.remove('rotate-180');
                    }
                }
                // Abrir o selecionado
                content.classList.remove('hidden');
                icon.classList.add('rotate-180');
            } else {
                content.classList.add('hidden');
                icon.classList.remove('rotate-180');
            }
        }

        // Smooth scroll para links de anchor
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>

    <!-- Stats Premium -->
    <section class="bg-white py-20 border-y border-gray-100">
        <div class="container mx-auto px-4 max-w-5xl">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="text-center group">
                    <div class="inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-blue-100 to-blue-50 mb-4 shadow-lg group-hover:scale-110 transition-transform">
                        <svg class="w-10 h-10 text-blue-900" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/>
                        </svg>
                    </div>
                    <p class="text-5xl font-black text-blue-950 mb-2">{{ voos_hoje_count }}</p>
                    <p class="text-gray-600 font-semibold">Voos com Problemas</p>
                    <p class="text-xs text-gray-400 mt-1">Atualizado hoje</p>
                </div>

                <div class="text-center group">
                    <div class="inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-green-100 to-green-50 mb-4 shadow-lg group-hover:scale-110 transition-transform">
                        <svg class="w-10 h-10 text-green-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                    <p class="text-5xl font-black text-blue-950 mb-2">R$ 10k</p>
                    <p class="text-gray-600 font-semibold">Indenização Máxima</p>
                    <p class="text-xs text-gray-400 mt-1">Resolução ANAC 400</p>
                </div>

                <div class="text-center group">
                    <div class="inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-orange-100 to-orange-50 mb-4 shadow-lg group-hover:scale-110 transition-transform">
                        <svg class="w-10 h-10 text-orange-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                        </svg>
                    </div>
                    <p class="text-5xl font-black text-blue-950 mb-2">100%</p>
                    <p class="text-gray-600 font-semibold">Gratuito e Seguro</p>
                    <p class="text-xs text-gray-400 mt-1">Sem custos iniciais</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer Premium - Simplificado para Conversão -->
    <footer class="bg-gradient-to-b from-blue-950 to-blue-900 text-white py-12">
        <div class="container mx-auto px-4 max-w-6xl">
            <div class="text-center mb-8">
                <div class="flex items-center justify-center space-x-2 mb-4">
                    <div class="w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 21l2-6 9-3-9-3-2-6-2 7-6 2 6 2 2 7z"/>
                        </svg>
                    </div>
                    <div class="text-left">
                        <span class="text-xl font-black leading-tight block">MatchFly</span>
                        <p class="text-[10px] text-blue-200 uppercase tracking-wider">ANAC COMPLIANCE</p>
                    </div>
                </div>
                <p class="text-blue-200 text-sm leading-relaxed max-w-2xl mx-auto">
                    Plataforma de verificação de direitos de passageiros aéreos conforme Resolução ANAC 400.
                </p>
            </div>
            
            <div class="border-t border-blue-800 pt-8 text-center">
                <p class="text-blue-300 text-sm mb-2">
                    MatchFly - Informações sobre direitos de passageiros aéreos (ANAC 400)
                </p>
                <p class="text-blue-400 text-xs">
                    Última atualização: {{ last_update }} • Todos os direitos reservados © 2026
                </p>
            </div>
        </div>
    </footer>

    <!-- Floating Action Button (Verificar Indenização - z-50 acima do widget) -->
    <a href="https://funnel.airhelp.com/claims/new/trip-details?lang=pt-br&departureAirportIata=GRU&a_aid=69649260287c5&a_bid=c63de166&utm_medium=affiliate&utm_source=pap&utm_campaign=aff-69649260287c5"
       target="_blank"
       class="fixed bottom-8 right-8 z-50 w-16 h-16 bg-gradient-to-br from-blue-900 to-blue-700 hover:from-blue-800 hover:to-blue-600 text-white rounded-full shadow-2xl flex items-center justify-center hover:scale-110 transition-all group">
        <svg class="w-8 h-8 group-hover:rotate-12 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
        </svg>
    </a>

    <script>
        (function() {
          const iniciais = ['MJ', 'RK', 'SP', 'TR', 'LB', 'CF', 'AB', 'GV', 'DR', 'PH'];
          let idx = 0;
          setInterval(() => {
            const a1 = document.getElementById('home-avatar-1');
            const a2 = document.getElementById('home-avatar-2');
            if(a1 && a2) {
              [a1, a2].forEach(el => el.style.transition = 'all 0.6s ease');
              a1.style.opacity = '0'; a2.style.opacity = '0';
              setTimeout(() => {
                a1.innerText = iniciais[idx % iniciais.length];
                a2.innerText = iniciais[(idx + 1) % iniciais.length];
                a1.style.opacity = '1'; a2.style.opacity = '1';
                idx++;
              }, 600);
            }
          }, 4000);
        })();
    </script>

    <script src="https://unpkg.com/lucide@latest"></script>
    <script>lucide.createIcons();</script>

    <!-- Auto-Scroll Mobile: gestão híbrida (sem snap = auto; com snap = ao tocar) -->
    <script>
    (function() {
        'use strict';
        var isMobile = function() { return window.innerWidth < 768; };
        var containers = document.querySelectorAll('.js-ping-pong-scroll');
        containers.forEach(function(container) {
            var direction = 1;
            var speed = 0.8;
            var isPaused = false;
            var animationId = null;
            var resumeTimeoutId = null;
            function animate() {
                if (!isMobile() || isPaused) return;
                var maxScroll = container.scrollWidth - container.clientWidth;
                if (container.scrollLeft >= maxScroll - 2 && direction === 1) {
                    direction = -1;
                } else if (container.scrollLeft <= 2 && direction === -1) {
                    direction = 1;
                }
                container.scrollLeft += speed * direction;
                animationId = requestAnimationFrame(animate);
            }
            function pauseScroll() {
                isPaused = true;
                if (animationId) {
                    cancelAnimationFrame(animationId);
                    animationId = null;
                }
                container.classList.add('snap-x', 'snap-mandatory');
                if (resumeTimeoutId) {
                    clearTimeout(resumeTimeoutId);
                    resumeTimeoutId = null;
                }
            }
            function resumeScroll() {
                resumeTimeoutId = setTimeout(function() {
                    container.classList.remove('snap-x', 'snap-mandatory');
                    isPaused = false;
                    if (!animationId && isMobile()) {
                        animationId = requestAnimationFrame(animate);
                    }
                }, 3000);
            }
            container.addEventListener('touchstart', pauseScroll, { passive: true });
            container.addEventListener('touchend', resumeScroll, { passive: true });
            container.addEventListener('touchcancel', resumeScroll, { passive: true });
            container.addEventListener('mousedown', pauseScroll);
            container.addEventListener('mouseup', resumeScroll);
            container.addEventListener('mouseleave', resumeScroll);
            container.addEventListener('wheel', function() {
                pauseScroll();
                resumeScroll();
            }, { passive: true });
            if (isMobile()) {
                animationId = requestAnimationFrame(animate);
            }
            var resizeTimeout;
            window.addEventListener('resize', function() {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(function() {
                    if (isMobile() && !isPaused && !animationId) {
                        container.classList.remove('snap-x', 'snap-mandatory');
                        animationId = requestAnimationFrame(animate);
                    } else if (!isMobile()) {
                        if (animationId) {
                            cancelAnimationFrame(animationId);
                            animationId = null;
                        }
                        container.classList.remove('snap-x', 'snap-mandatory');
                        isPaused = false;
                    }
                }, 200);
            }, { passive: true });
        });
    })();
    </script>

    {% include 'includes/share_widget.html' %}

</body>
</html>
